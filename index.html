<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Catcher</title>
    <style>
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #000;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }

        #game {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #000;
        }

        #score {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 28px;
            color: #fff;
            font-weight: bold;
        }

        .wrapper {
            position: absolute;
            width: 96px;
            height: 96px;
            top: 15%;
            left: 0;
            animation: fall linear 4s forwards;
            z-index: 2;
        }

        .cage, .emoji {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .cage {
            background-image: url('Cage.png');
            background-size: cover;
            background-position: center;
            z-index: 1;
            cursor: pointer;
        }

        .emoji {
            z-index: 0;
            cursor: pointer;
            transition: transform 0.3s ease, opacity 0.3s ease;
            user-select: none;
        }

        .emoji.clicked {
            transform: scale(1.5) rotate(10deg);
            opacity: 0;
        }

        .points {
            position: absolute;
            font-size: 24px;
            color: #00ff00;
            font-weight: bold;
            opacity: 1;
            transition: opacity 1s ease;
            pointer-events: none;
        }

        @keyframes fall {
            0% {
                transform: translateY(0) rotate(0deg);
            }
            100% {
                transform: translateY(calc(100vh - 96px)) rotate(360deg);
            }
        }
    </style>
</head>
<body>
    <div id="game">
        <div id="score">Очки: 0</div>
    </div>

    <script>
        const game = document.getElementById('game');
        const scoreDisplay = document.getElementById('score');
        const emojis = ['transparent_bird.png', 'transparent_bird_1.png', 'transparent_bird_2.png'];
        let score = 0;
        const emojiWidth = 96;
        const screenWidth = window.innerWidth;
        const maxLeft = screenWidth - emojiWidth;

        function createEmoji() {
            const emoji = document.createElement('img');
            emoji.classList.add('emoji');
            emoji.src = emojis[Math.floor(Math.random() * emojis.length)];

            const cage = document.createElement('div');
            cage.classList.add('cage');

            const wrapper = document.createElement('div');
            wrapper.classList.add('wrapper');
            wrapper.style.left = `${Math.random() * maxLeft}px`;

            wrapper.appendChild(cage);
            wrapper.appendChild(emoji);
            game.appendChild(wrapper);

            let isCageClicked = false;

            // Клик по клетке: клетка исчезает
            cage.addEventListener('click', () => {
                if (isCageClicked) return;
                isCageClicked = true;
                cage.style.opacity = '0'; // Прячем клетку
            });

            // Клик по голубю: начисляем очки и убираем голубя
            emoji.addEventListener('click', (event) => {
                if (isCageClicked && !emoji.classList.contains('clicked')) {
                    score++; // Засчитываем очки
                    updateScoreDisplay(score);

                    // Анимация +1
                    const pointAnim = document.createElement('div');
                    pointAnim.classList.add('points');
                    pointAnim.textContent = "+1";
                    pointAnim.style.left = `${event.clientX}px`;
                    pointAnim.style.top = `${event.clientY}px`;
                    game.appendChild(pointAnim);
                    setTimeout(() => pointAnim.remove(), 1000);

                    // Голубь исчезает
                    emoji.classList.add('clicked');
                    setTimeout(() => {
                        wrapper.remove();
                    }, 300);
                }
            });

            // Удаление wrapper, если клетка не была нажата
            wrapper.addEventListener('animationend', () => {
                if (!isCageClicked) {
                    wrapper.remove();
                }
            });
        }

        function updateScoreDisplay(newScore) {
            scoreDisplay.textContent = `Очки: ${newScore}`;
        }

        function startGame() {
            setInterval(createEmoji, 1000); // Генерация новых голубей каждую секунду
        }

        startGame();
    </script>
</body>
</html>
