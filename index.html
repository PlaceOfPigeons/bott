<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini App</title>
    <script>
        window.onload = function() {
            // Инициализация Telegram Web App
            
            // Функция для сохранения очков
            function savePoints(points) {
                const data = { points: points };

                // Сохраняем данные в личном хранилище Telegram
                window.Telegram.WebApp.saveData(JSON.stringify(data)).then(() => {
                    console.log('Очки сохранены');
                }).catch(err => {
                    console.error('Ошибка при сохранении очков:', err);
                });
            }

            // Функция для загрузки очков
            function loadPoints() {
                window.Telegram.WebApp.loadData().then(data => {
                    const parsedData = JSON.parse(data);
                    const userPoints = parsedData?.points || 0; // Проверяем, есть ли данные
                    console.log('Загруженные очки:', userPoints);
                    // Обновление интерфейса
                    document.getElementById('points').innerText = `Ваши очки: ${userPoints}`;
                }).catch(err => {
                    console.error('Ошибка при загрузке очков:', err);
                });
            }

            // Пример использования
            const currentPoints = Math.floor(Math.random() * 100); // Пример текущих очков
            savePoints(currentPoints); // Сохраняем очки
            loadPoints(); // Загружаем очки
        };
    </script>
</head>
<body>
    <h1>Добро пожаловать в Mini App!</h1>
    <p id="points">Ваши очки: 0</p>
</body>
</html>
